@{
    ViewData["Title"] = "User Manual";
}

<div class="container">
    <h1 class="mb-4">Керівництво користувача системи ShopMVC</h1>

    <div class="mb-5">
        <h2 class="text-primary">1. Ідентифікаційний розділ</h2>
        <div class="card">
            <div class="card-body">
                <h5>Призначення системи</h5>
                <p>ShopMVC - це система управління інтернет-магазином, яка дозволяє аналізувати взаємозв'язки між товарами, категоріями, виробниками та замовленнями користувачів.</p>

                <h5>Коротка назва</h5>
                <p>ShopMVC</p>

                <h5>Автор</h5>
                <p>[Ваше ім'я]</p>

                <h5>Специфікація комп'ютера</h5>
                <ul>
                    <li>Процесор: Intel Core i5 або вище</li>
                    <li>Оперативна пам'ять: 8 ГБ або більше</li>
                    <li>Вільне місце на диску: 1 ГБ</li>
                </ul>

                <h5>Операційна система</h5>
                <p>Windows 10/11, macOS, Linux</p>

                <h5>Базова СУБД</h5>
                <p>Microsoft SQL Server 2019 або новіше</p>
            </div>
        </div>
    </div>

    <div class="mb-5">
        <h2 class="text-primary">2. Опис інтерфейсу</h2>
        <div class="card">
            <div class="card-body">
                <h5>Головне меню запитів</h5>
                <p>Головна сторінка запитів містить два розділи:</p>
                <ul>
                    <li>Прості параметризовані запити (використовують більше однієї таблиці)</li>
                    <li>Запити з множинними порівняннями</li>
                </ul>

                <h5>Форми запитів</h5>
                <p>Кожна форма запиту містить:</p>
                <ul>
                    <li>Поле введення параметру (якщо потрібно)</li>
                    <li>Таблицю результатів</li>
                    <li>Кнопку "Назад до меню"</li>
                </ul>

                <h5>Елементи керування</h5>
                <ul>
                    <li><strong>Текстові поля:</strong> для введення числових значень (ID, кількість)</li>
                    <li><strong>Випадаючі списки:</strong> для вибору країн, категорій, користувачів</li>
                    <li><strong>Кнопки:</strong> для відправки запиту та навігації</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="mb-5">
        <h2 class="text-primary">3. Таблиці та зв'язки</h2>
        <div class="card">
            <div class="card-body">
                <h5>Основні таблиці</h5>
                <ul>
                    <li><strong>products</strong> - товари (pd_id, pd_name, pd_price, pd_quantity)</li>
                    <li><strong>categories</strong> - категорії (cg_id, cg_name)</li>
                    <li><strong>manufacturers</strong> - виробники (mn_id, mn_name, country_id)</li>
                    <li><strong>orders</strong> - замовлення (od_id, od_user, od_total)</li>
                    <li><strong>users</strong> - користувачі (Id, UserName)</li>
                    <li><strong>countries</strong> - країни (co_id, co_name)</li>
                </ul>

                <h5>Зв'язуючі таблиці</h5>
                <ul>
                    <li><strong>product_categories</strong> - зв'язок товарів з категоріями</li>
                    <li><strong>product_orders</strong> - зв'язок товарів з замовленнями</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="mb-5">
        <h2 class="text-primary">4. Запити</h2>
        <div class="card">
            <div class="card-body">
                <h5>Прості параметризовані запити</h5>
                <ol>
                    <li>
                        <strong>Товари, які не були замовлені та мають кількість менше вказаної</strong><br>
                        <code>SELECT p.pd_name, p.pd_quantity, p.pd_price, m.mn_name<br>
                        FROM products p<br>
                        JOIN manufacturers m ON p.manufacturer_id = m.mn_id<br>
                        WHERE p.pd_id NOT IN (SELECT product_id FROM product_orders)<br>
                        AND p.pd_quantity < @MaxQuantity;</code>
                    </li>
                    <li>
                        <strong>Виробники товарів, замовлених конкретним користувачем</strong><br>
                        <code>SELECT DISTINCT m.mn_name, STRING_AGG(p.pd_name, ', ')<br>
                        FROM manufacturers m<br>
                        JOIN products p ON m.mn_id = p.manufacturer_id<br>
                        JOIN product_orders po ON p.pd_id = po.product_id<br>
                        JOIN orders o ON po.order_id = o.od_id<br>
                        WHERE o.od_user = @UserId<br>
                        GROUP BY m.mn_id, m.mn_name;</code>
                    </li>
                </ol>

                <h5>Запити з множинними порівняннями</h5>
                <ol>
                    <li>
                        <strong>Товари з ціною вище середньої в категорії</strong><br>
                        <code>WITH CategoryAverages AS (<br>
                        SELECT c.cg_id, AVG(CAST(p.pd_price AS DECIMAL(18,2))) as AvgPrice<br>
                        FROM categories c<br>
                        JOIN product_categories pc ON c.cg_id = pc.category_id<br>
                        JOIN products p ON pc.product_id = p.pd_id<br>
                        GROUP BY c.cg_id<br>
                        )<br>
                        SELECT p.pd_name, p.pd_price, ca.AvgPrice<br>
                        FROM products p<br>
                        JOIN product_categories pc ON p.pd_id = pc.product_id<br>
                        JOIN CategoryAverages ca ON pc.category_id = ca.cg_id<br>
                        WHERE CAST(p.pd_price AS DECIMAL(18,2)) > ca.AvgPrice;</code>
                    </li>
                    <li>
                        <strong>Виробники, що постачають товари у всіх категоріях</strong><br>
                        <code>WITH CategoryCount AS (<br>
                        SELECT COUNT(DISTINCT cg_id) as TotalCategories<br>
                        FROM categories<br>
                        )<br>
                        SELECT m.mn_name, COUNT(DISTINCT pc.category_id) as CategoryCount<br>
                        FROM manufacturers m<br>
                        JOIN products p ON m.mn_id = p.manufacturer_id<br>
                        JOIN product_categories pc ON p.pd_id = pc.product_id<br>
                        GROUP BY m.mn_id, m.mn_name<br>
                        HAVING COUNT(DISTINCT pc.category_id) = (SELECT TotalCategories FROM CategoryCount);</code>
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <div class="mb-5">
        <h2 class="text-primary">5. Вимоги до користувача</h2>
        <div class="card">
            <div class="card-body">
                <h5>Кваліфікація</h5>
                <ul>
                    <li>Базові навички роботи з операційною системою Windows</li>
                    <li>Знання української мови для роботи з інтерфейсом</li>
                    <li>Базове розуміння структури даних та взаємозв'язків між ними</li>
                </ul>

                <h5>Додаткові вимоги</h5>
                <ul>
                    <li>Доступ до веб-браузера (Chrome, Firefox, Edge)</li>
                    <li>Підключення до інтернету</li>
                    <li>Розуміння базових концепцій SQL-запитів</li>
                </ul>
            </div>
        </div>
    </div>
</div> 